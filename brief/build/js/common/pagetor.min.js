/*! brief - v0.0.0 - 2016-05-11 
 *author:cityvoice[at]hotmail.com
 */

define(["angular"],function(a){return{name:"pagetor",type:"directive",module:function(){return{restrict:"EA",scope:{conf:"="},replace:!0,template:'<ul class="pagination" ng-show="conf.totalPages > 0"><li ng-class="{disabled: conf.currentPage == 1}" ng-click="prevPage()"><a href="#">&laquo;</a></li><li ng-repeat="n in conf.pageList" ng-click="selectPage(n)" ng-class="{active: n == conf.currentPage, separate: item == \'...\'}"><a href="#">{{n}}</a></li><li ng-class="{disabled: conf.currentPage == conf.totalPages}" ng-click="nextPage()"><a href="#">&raquo;</a></li><li ng-show="conf.totalPages > 0" class="page-total">每页{{conf.pageSize}}条第<input type="text" ng-model="jumpPageNum" ng-change="jumpToPage()"/>页每页<select class="" ng-model="conf.pageSize" ng-options="option for option in conf.pageOptions " ng-change="changePageOption()"></select>条/共<strong>{{ conf.totalItems }}</strong>条</li></ul>',link:function(a,b,c){a.selectPage=function(b){a.conf.currentPage=b},a.prevPage=function(){a.conf.currentPage-=1},a.nextPage=function(){a.conf.currentPage+=1},a.jumpToPage=function(){a.jumpPageNum=a.jumpPageNum.replace(/[^0-9]/g,""),""!==a.jumpPageNum&&(a.conf.currentPage=a.jumpPageNum)},a.changePageOption=function(){},a.$watch(function(){a.conf.currentPage<1&&(a.conf.currentPage=1),a.conf.currentPage>a.conf.totalPages&&(a.conf.currentPage=a.conf.totalPages),a.jumpPageNum=a.conf.currentPage;var b=a.conf.currentPage+" "+a.conf.totalItems+" ";return b},function(b,c){b!=c&&a.conf.onPageUpdate()})}}}}});